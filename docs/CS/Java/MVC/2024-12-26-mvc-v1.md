---
title: í”„ë ˆì„ì›Œí¬ ë§Œë“¤ê¸° V1
parent: Spring MVC
nav_order: -2
---

# 01. í”„ë ˆì„ì›Œí¬ ë§Œë“¤ê¸°

> MVC pattern ì˜ íš¨ìœ¨ì„±ì„ ì²´ê°í•˜ê¸° ìœ„í•´ ì½”ë“œë¥¼ ë‹¨ê³„ì ìœ¼ë¡œ ë¦¬íŒ©í† ë§í•˜ë©´ì„œ Spring MVCì™€ ìœ ì‚¬í•œ í”„ë ˆì„ì›Œí¬ë¥¼ ë§Œë“¤ì–´ë³´ì. (v1 ~ v5 ê¹Œì§€ì˜ ê³¼ì •ì„ ê±°ì³ ë§Œë“¤ì–´ë‚˜ê°ˆ ê²ƒì´ë‹¤.)

### 1ï¸âƒ£ &nbsp; V1

<img src="/assets/images/pages/cs/mvc/01. V1 pattern.png">
<span style="color: #808080">ì¶œì²˜: ê¹€ì˜í•œì˜ ìŠ¤í”„ë§MVC (ì¸í”„ëŸ°)</span>

ğŸ’¡ ê¸°ì¡´ ì½”ë“œì—ì„œëŠ” í•˜ë‚˜ì˜ ì„œë¸”ë¦¿ì´ model, view, controller ì˜ ëª¨ë“  ì—­í• ì„ ìˆ˜í–‰í•˜ê³  ìˆì—ˆê¸° ë•Œë¬¸ì— ì½”ë“œì˜ ê°€ë…ì„±, ì¬ì‚¬ìš©ì„±ì´ ë–¨ì–´ì§€ëŠ” ë‹¨ì ì´ ìˆì—ˆë‹¤. (ìœ ì§€ë³´ìˆ˜ê°€ í—˜ë‚œí•´ì§...) v1 ì—ì„œëŠ” controller ì˜ ì—­í• ì„ ë¶„ë¦¬í•˜ê¸°ë¡œ í–ˆë‹¤.

### âš¡ï¸ &nbsp; 1-1. FrontControllerServletV1

- í´ë¼ì´ì–¸íŠ¸ê°€ ìš”ì²­í•˜ëŠ” uri ë¥¼ ê°ê°ì˜ ì»¨íŠ¸ë¡¤ëŸ¬ë¡œ ë§¤í•‘í•´ì¤„ FrontController ë¥¼ ë§Œë“¤ì—ˆë‹¤.
- í•´ë‹¹í•˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ í˜¸ì¶œí•˜ê³ , process ë©”ì„œë“œë¥¼ ì‹¤í–‰ì‹œí‚¨ë‹¤.

```java

// * : v1 íŒ¨í‚¤ì§€ ë°‘ì— ì–´ë–¤ ì£¼ì†Œê°€ ë“¤ì–´ì™€ë„ í•´ë‹¹ í´ë˜ìŠ¤ì˜ ì„œë¸”ë¦¿ì´ í˜¸ì¶œëœë‹¤ëŠ” ëœ».
@WebServlet(name = "frontControllerServletV1", urlPatterns = "/front-controller/v1/*")
public class FrontControllerServletV1 extends HttpServlet {

    private Map<String, ControllerV1> controllerMap = new HashMap<>();

    public FrontControllerServletV1() {
        controllerMap.put("/front-controller/v1/members/new-form", new MemberFormControllerV1());
        controllerMap.put("/front-controller/v1/members/save", new MemberSaveControllerV1());
        controllerMap.put("/front-controller/v1/members", new MemberListControllerV1());
    }

    @Override
    protected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        System.out.println("FrontControllerServletV1.service");

        String requestURI = request.getRequestURI(); //ìš”ì²­ì£¼ì†Œ uri ë¥¼ ê·¸ëŒ€ë¡œ ë°›ì•„ì˜¬ ìˆ˜ ìˆë‹¤.

        ControllerV1 controller = controllerMap.get(requestURI); //ë§µì—ì„œ í•´ë‹¹ uri ì˜ êµ¬í˜„ê°ì²´ë¥¼ êº¼ë‚´ì˜¨ë‹¤.
        if(controller == null) {
            response.setStatus(HttpServletResponse.SC_NOT_FOUND); //ì›¹ ìƒíƒœì½”ë“œë¥¼ 404ë¡œ ë°”ê¾¸ê³  ë¦¬í„´.
            return;
        }
        //í•´ë‹¹ êµ¬í˜„ê°ì²´ì˜ process ë©”ì†Œë“œë¥¼ ì‹¤í–‰í•œë‹¤. ë‹¤í˜•ì„±!!
        controller.process(request, response);

    }
}

```

### âš¡ï¸ &nbsp; 1-2. ControllerV1

- ê¸°ë³¸êµ¬ì¡°ì—ì„œ í–ˆë˜ëŒ€ë¡œ ê° ê¸°ëŠ¥ë³„(uri)ë¡œ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ë§¤í•‘í•´ì¤„ ê²ƒì´ë‹¤. ë‹¤ë§Œ ê³µí†µì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” HttpServletRequest, HttpServletResponse ë¥¼ ControllerV1 ì¸í„°í˜ì´ìŠ¤ì— ì •ì˜í•˜ì—¬ ê° ì»¨íŠ¸ë¡¤ëŸ¬ë³„ë¡œ ì˜¤ë²„ë¼ì´ë”©í•˜ì—¬ ì‚¬ìš©í•˜ë„ë¡ ë§Œë“¤ì—ˆë‹¤.

- ë‹¤í˜•ì„±ì˜ ì¥ì ì€ ë¡œì§ì˜ ì¼ê´€ì„±ì„ ìœ ì§€í•˜ì—¬ ë³€ê²½ì„ ìµœì†Œí™”í•  ìˆ˜ ìˆë‹¤ëŠ” ë° ìˆë‹¤. ë³¸ ì˜ˆì œì²˜ëŸ¼ FrontControllerì—ì„œ process() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©´ ê° êµ¬í˜„ê°ì²´ë³„ë¡œ ë©”ì„œë“œë¥¼ ì˜¤ë²„ë¼ì´ë”©í•˜ì—¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ìˆ˜í–‰í•˜ê²Œ ëœë‹¤.

```java

public interface ControllerV1 {

    //ì—¬ëŸ¬ê°œì˜ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ë§Œë“¤ê±°ë¼ì„œ ì¸í„°í˜ì´ìŠ¤ì˜ ë‹¤í˜•ì„±ì„ í™œìš©í•œë‹¤.
    //í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ì´ ì¸í„°í˜ì´ìŠ¤ë¥¼ í˜¸ì¶œí•˜ë©´ì„œ ë¡œì§ì˜ ì¼ê´€ì„±ì„ ê°€ì ¸ê°„ë‹¤.
    void process(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException;

}
```

### âš¡ï¸ &nbsp; 1-3. êµ¬í˜„ì²´ ì»¨íŠ¸ë¡¤ëŸ¬ë“¤...

- ControllerV1 ì¸í„°í˜ì´ìŠ¤ë¥¼ ìƒì†ë°›ì•„ ì˜¤ë²„ë¼ì´ë”©í•˜ëŠ” í˜•íƒœë¡œ 3ê°œì˜ ê°œë³„ ì»¨íŠ¸ë¡¤ëŸ¬ë“¤ì„ ë§Œë“¤ì—ˆë‹¤.

```java

public class MemberFormControllerV1 implements ControllerV1 {
    @Override
    public void process(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        String viewPath = "/WEB-INF/views/new-form.jsp";
        RequestDispatcher dispatcher = request.getRequestDispatcher(viewPath);
        dispatcher.forward(request, response);
    }
}
```

```java

public class MemberSaveControllerV1 implements ControllerV1 {

    private MemberRepository memberRepository = MemberRepository.getInstance();

    @Override
    public void process(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        String username = request.getParameter("username");
        int age = Integer.parseInt(request.getParameter("age"));

        Member member = new Member(username, age);
        memberRepository.save(member);

        request.setAttribute("member", member);

        String viewPath = "/WEB-INF/views/save-result.jsp";
        RequestDispatcher dispatcher = request.getRequestDispatcher(viewPath);
        dispatcher.forward(request, response);
    }
}
```

```java

public class MemberListControllerV1 implements ControllerV1 {

    private MemberRepository memberRepository = MemberRepository.getInstance();

    @Override
    public void process(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        List<Member> members = memberRepository.findAll();

        request.setAttribute("members", members);

        String viewPath = "/ERB-INF/views/members.jsp";
        RequestDispatcher dispatcher = request.getRequestDispatcher(viewPath);
        dispatcher.forward(request,response);
    }
}
```

ğŸ¤”ğŸ’­ View ë¡œ ì „ì†¡í•˜ëŠ” dispatcher ë©”ì„œë“œê°€ ê²¹ì¹˜ëŠ”ë°..? ì´ê±¸ ê°œì„ í•  ìˆ˜ ì—†ì„ê¹Œ?
