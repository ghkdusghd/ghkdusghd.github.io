---
title: PRG(Post/Redirect/Get)
parent: Spring MVC
nav_order: -13
---

# 11. PRG(Post/Redirect/Get)

> μ›Ή λΈλΌμ°μ €μ 'μƒλ΅κ³ μΉ¨'μ€ λ§μ§€λ§‰μ— μ„λ²„μ— μ „μ†΅ν• λ°μ΄ν„°λ¥Ό λ‹¤μ‹ μ „μ†΅ν•λ‹¤. μ΄κ²ƒμ΄ λ¬Έμ κ°€ λ  λ•κ°€ μλ”λ°, μ»¨νΈλ΅¤λ¬μ—μ„ λΉ„μ¦λ‹μ¤ λ΅μ§ μν–‰ ν›„ λ·° ν…ν”λ¦ΏμΌλ΅ μ΄λ™μ‹ν‚¤λ” κ²½μ°λ¥Ό μƒκ°ν•΄λ³΄μ.
>
> <img src="/assets/images/pages/cs/mvc/07. PRG-01.png">
> <span style="color: #808080">μ¶μ²: κΉ€μν•μ μ¤ν”„λ§MVC (μΈν”„λ°)</span>
>
> μλ¥Ό λ“¤μ–΄ 'μƒν’ λ“±λ΅'μ„ ν• μ΄ν›„ κ·Έ μƒν’μ 'μƒμ„Ένμ΄μ§€'λ΅ λ°”λ΅ μ΄λ™μ‹ν‚¨λ‹¤κ³  κ°€μ •ν•λ©΄, μ‚¬μ©μκ°€ 'μƒμ„Ένμ΄μ§€'μ—μ„ μƒλ΅κ³ μΉ¨μ„ λ„λ¥Ό κ²½μ°, λ§μ§€λ§‰μ— μν–‰ν• μ‘μ—…μΈ 'μƒν’ λ“±λ΅'μ΄ μ¤‘λ³µμΌλ΅ μν–‰λμ–΄λ²„λ¦°λ‹¤.

- μ•„λμ™€ κ°™μ΄ μ½”λ“λ¥Ό μ‘μ„±ν•  κ²½μ° λ¬Έμ κ°€ λλ” κ²ƒμ΄λ‹¤...

```java
 @PostMapping("/add")
 public String addItemV1(@ModelAttribute Item item) {

     //μƒν’ μ €μ¥
     itemRepository.save(item);
     //λ·° ν…ν”λ¦ΏμΌλ΅ μ „μ†΅
     return "basic/item";

}
```

### π’­ &nbsp; 'μƒλ΅κ³ μΉ¨ λ¬Έμ ' λ¥Ό ν•΄κ²°ν•λ ¤λ©΄ μ–΄λ–»κ² ν•΄μ•Ό ν•μ§€ ... ?

### π’΅ &nbsp; μƒν’ λ“±λ΅ μ΄ν›„μ— λ·° ν…ν”λ¦ΏμΌλ΅ μ΄λ™μ‹ν‚¤λ” κ²ƒμ΄ μ•„λ‹, redirect ν•λ„λ΅ μ½”λ“λ¥Ό μ‘μ„±ν•λ©΄ λλ‹¤ !

> ν•΄λ‹µ !
>
> <img src="/assets/images/pages/cs/mvc/07. PRG-02.png">
> <span style="color: #808080">μ¶μ²: κΉ€μν•μ μ¤ν”„λ§MVC (μΈν”„λ°)</span>
>
> redirect λ΅ νμ΄μ§€λ¥Ό μ΄λ™ν•κ² λλ©΄, μƒλ΅κ³ μΉ¨μ„ ν–μ„ λ• λ§μ§€λ§‰μΌλ΅ μν–‰ν• μ‘μ—…μ΄ GetMapping μ΄ λκΈ° λ•λ¬Έμ— μƒν’ λ“±λ΅μ΄ μ¤‘λ³µμΌλ΅ μν–‰λλ” λ¬Έμ λ¥Ό ν•΄κ²°ν•  μ μλ‹¤.

- λ‹¤λ§ redirect ν•κ²λλ©΄ request μμ—­μ λ°μ΄ν„°κ°€ μ‚¬λΌμ Έλ²„λ¦°λ‹¤. λ°μ΄ν„°λ¥Ό μ μ§€ν•  ν•„μ”κ°€ μμ„ λ•λ” RedirectAttributes μ addAttribute λ©”μ„λ“λ¥Ό μ‚¬μ©ν•μ.

- RedirectAttributes λ” pathVariable, μΏΌλ¦¬ νλΌλ―Έν„°κΉμ§€ μ²λ¦¬ν•΄ μ¤€λ‹¤.

- λν• κ°€μ Έκ° λ°μ΄ν„°λ¥Ό μΌνμ„±μΌλ΅ μ‚¬μ©ν•κ³ μ ν•λ” κ²½μ°μ—λ” addFlashAttribute λ©”μ„λ“λ¥Ό μ‚¬μ©ν•  μ μλ‹¤. μ—¬κΈ° λ‹΄μ•„λ‘” κ°’μ€ μƒλ΅κ³ μΉ¨μ„ ν•λ©΄ νλ°λμ–΄ μ‚¬λΌμ§„λ‹¤.

```java
 @PostMapping("/add")
 public String addItemV2(@ModelAttribute Item item, RedirectAttributes redirectAttributes) {
     //μƒν’ μ €μ¥
     Item savedItem = itemRepository.save(item);
     //redirectν•  urlμ— μƒλ΅ μƒμ„±ν• μ•„μ΄ν… idλ¥Ό νλΌλ―Έν„°λ΅ λ„£κΈ° μ„ν•΄ itemId λ¥Ό μ¶”κ°€ν–λ‹¤.
     redirectAttributes.addAttribute("itemId", savedItem.getId());
     return "redirect:/basic/items/{itemId}";

}
```
