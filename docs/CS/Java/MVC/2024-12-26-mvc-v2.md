---
title: í”„ë ˆì„ì›Œí¬ ë§Œë“¤ê¸° V2
parent: Spring MVC
nav_order: -3
---

### 2ï¸âƒ£ &nbsp; V ï¼’

> ğŸ¤”ğŸ’­ View ë¡œ ì „ì†¡í•˜ëŠ” dispatcher ë©”ì„œë“œê°€ ê²¹ì¹˜ëŠ”ë°..? ì´ê±¸ ê°œì„ í•  ìˆ˜ ì—†ì„ê¹Œ? â¡ï¸ getRequestDispatcher ë¼ëŠ” ê³µí†µ ë©”ì„œë“œë¥¼ í•˜ë‚˜ë¡œ í†µí•©ì‹œí‚¤ì !

<img src="/assets/images/pages/cs/mvc/02. V2 pattern.png">
<span style="color: #808080">ì¶œì²˜: ê¹€ì˜í•œì˜ ìŠ¤í”„ë§MVC (ì¸í”„ëŸ°)</span>

ğŸ’¡ ê·¸ë˜ì„œ ë“±ì¥í•œ V2 ì•„í‚¤í…ì³. V1 ì—ì„œëŠ” ëª¨ë“  ì»¨íŠ¸ë¡¤ëŸ¬ê°€ ë·°ë¡œ ë„˜ì–´ê°€ëŠ” ë¡œì§ì„ ê°–ê³  ìˆì–´ì„œ ì¤‘ë³µì´ ìˆê³  êµ¬ì¡°ìƒ ê¹”ë”í•˜ì§€ ì•Šì•˜ë‹¤. V2ì—ì„œëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ìˆ˜í–‰í•˜ëŠ” ê²ƒì—ë§Œ ì§‘ì¤‘í•˜ê³  MyView ê°ì²´ë¥¼ ë°˜í™˜í•˜ì—¬ ë·°ë¡œ ë„˜ì–´ê°€ëŠ” ì‘ì—…ì€ ë‹¤ë¥¸ ê°ì²´ì—ì„œ ìˆ˜í–‰í•˜ë„ë¡ ì—­í• ì„ ë¶„ë¦¬í–ˆë‹¤.

### âš¡ï¸ &nbsp; 2-1. MyView

- MyView í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì—ˆë‹¤. render() ë©”ì„œë“œë¡œ viewPath ê²½ë¡œë¡œ ë¸Œë¼ìš°ì €ë¥¼ ì´ë™ì‹œí‚¤ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•œë‹¤.

```java

public class MyView {

    private String viewPath;

    public MyView(String viewPath) {
        this.viewPath = viewPath;
    }

    //ê° ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ jsp ë¡œ ë„˜ê²¨ì£¼ëŠ” ë¡œì§ì„ View ê°ì²´ì— ë„£ì—ˆë‹¤.
    public void render(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        RequestDispatcher dispatcher = request.getRequestDispatcher(viewPath);
        dispatcher.forward(request, response);
    }

}
```

### âš¡ï¸ &nbsp; 2-2. FrontControllerServletV2

- ì´ì œ í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œëŠ” requestDispatcher ì‘ì—…ì´ ìƒëµëœë‹¤. V1 ì—ì„œ í–ˆë˜ê²ƒì²˜ëŸ¼ ìš”ì²­ uriì— í•´ë‹¹í•˜ëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ê°€ì§„ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ í˜¸ì¶œí•œë‹¤ëŠ” í° í‹€ì€ ê°™ì§€ë§Œ, ë‹¤ë¥¸ ì ì€ ê° ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ë¦¬í„´í•˜ëŠ” ê°’ì´ MyView ê°ì²´ë¼ëŠ” ì ì´ë‹¤.

- ê° ì»¨íŠ¸ë¡¤ëŸ¬ë“¤ì´ MyView ê°ì²´ì— viewPath ê°’ì„ ë‹´ì•„ ë°˜í™˜í•˜ë©´, í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ render() ë¥¼ ì‹¤í–‰í•˜ì—¬ ë¸Œë¼ìš°ì €ë¥¼ ì´ë™ì‹œí‚¨ë‹¤.

```java

@WebServlet(name = "frontControllerServletV2", urlPatterns = "/front-controller/v2/*")
public class FrontControllerServletV2 extends HttpServlet {

    private Map<String, ControllerV2> controllerMap = new HashMap<>();

    public FrontControllerServletV2() {
        controllerMap.put("/front-controller/v2/members/new-form", new MemberFormControllerV2());
        controllerMap.put("/front-controller/v2/members/save", new MemberSaveControllerV2());
        controllerMap.put("/front-controller/v2/members", new MemberListControllerV2());
    }

    @Override
    protected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        String requestURI = request.getRequestURI();

        ControllerV2 controller = controllerMap.get(requestURI);
        if(controller == null) {
            response.setStatus(HttpServletResponse.SC_NOT_FOUND);
            return;
        }

        MyView view = controller.process(request, response);
        view.render(request, response);
    }
}

```

### âš¡ï¸ &nbsp; 2-3. ControllerV2

- ê° ì»¨íŠ¸ë¡¤ëŸ¬ê°€ êµ¬í˜„í•˜ëŠ” ì¸í„°í˜ì´ìŠ¤. MyView ë¥¼ ë°˜í™˜í•˜ë„ë¡ ë§Œë“¤ì—ˆë‹¤.

```java

public interface ControllerV2 {

    //ì´ë²ˆ ì¸í„°í˜ì´ìŠ¤ëŠ” MyView ë¥¼ ë°˜í™˜í•˜ë„ë¡ ì„¤ê³„í•¨
    MyView process(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException;

}

```

### âš¡ï¸ &nbsp; 2-4. êµ¬í˜„ì²´ ì»¨íŠ¸ë¡¤ëŸ¬ë“¤...

- ê° ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ìˆ˜í–‰ í›„ MyView ê°ì²´ì— ìƒì„±ìë¡œ url path ë¥¼ ë„£ê³  ë°˜í™˜í•œë‹¤.

```java

public class MemberFormControllerV2 implements ControllerV2 {

    @Override
    public MyView process(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        MyView myView = new MyView("/WEB-INF/views/new-form.jsp");
        return myView;
    }

}
```

```java

public class MemberSaveControllerV2 implements ControllerV2 {

    private MemberRepository memberRepository = MemberRepository.getInstance();

    @Override
    public MyView process(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

        String username = request.getParameter("username");
        int age = Integer.parseInt(request.getParameter("age"));

        Member member = new Member(username, age);
        memberRepository.save(member);

        request.setAttribute("member", member);

        return new MyView("/WEB-INF/views/save-result.jsp");
    }
}
```

```java

public class MemberListControllerV2 implements ControllerV2 {

    private MemberRepository memberRepository = MemberRepository.getInstance();

    @Override
    public MyView process(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        List<Member> members = memberRepository.findAll();

        request.setAttribute("members", members);

        return new MyView("/WEB-INF/views/members.jsp");
    }
}
```

ğŸ¤”ğŸ’­ ê°€ë…ì„±ì´ ì¢€ ë‚˜ì•„ì§„ ê²ƒ ê°™ì•„. ê·¸ëŸ°ë° viewPath ì˜ "/WEB-INF/views" ê²½ë¡œëŠ” í•­ìƒ ê²¹ì¹˜ëŠ”ë° ì´ê±¸ ê³µí†µë¡œì§ìœ¼ë¡œ ë§Œë“¤ ìˆ˜ ì—†ì„ê¹Œ? ê·¸ë¦¬ê³  request ëŒ€ì‹  ë‹¤ë¥¸ Model ì„ ì‚¬ìš©í•˜ë©´ ì„œë¸”ë¦¿ì— ëŒ€í•œ ì¢…ì†ì„±ì„ ì—†ì•¨ ìˆ˜ ìˆì„ ê²ƒ ê°™ì€ë°...
