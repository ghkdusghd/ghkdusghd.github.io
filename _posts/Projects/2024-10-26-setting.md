---
title: "NCBT í”„ë¡œì íŠ¸ ì„¤ê³„ ë° ì„¸íŒ…"
excerpt: "-"

writer: Hwayeon Hong
# categories: projects
# permalink: /projects/:title/
tags:
  - [java, spring boot, gradle, mybatis, mysql]

toc: true
toc_sticky: true

date: 2024-10-26
last_modified_at: 2024-10-26
---

ğŸ“¢ NCBT í”„ë¡œì íŠ¸ëŠ” 'ê¸°íš - ë¶„ì„ - ì„¤ê³„ - êµ¬í˜„ - í…ŒìŠ¤íŠ¸ - ìš´ì˜' ì´ë¼ëŠ” í”„ë¡œê·¸ë˜ë°ì˜ ë¼ì´í”„ì‚¬ì´í´ì„ ì§€ì¼œ ì§„í–‰í–ˆì§€ë§Œ ì¶”í›„ íšŒê³ ë¡ì„ ëŒì•„ë³¼ ë•Œ 'í”„ë¡œì íŠ¸ ì„¸íŒ…' ë¶€ë¶„ì„ ê°€ì¥ ë§ì´ ì°¾ì•„ë³¼ ê²ƒ ê°™ì•„ì„œ ì´ ë¶€ë¶„ì„ ë¨¼ì € ì‘ì„±í–ˆë‹¤.

### 1ï¸âƒ£ í”„ë¡œì íŠ¸ ì„¸íŒ…

### < Back >

<b>1. Build.gradle ì˜ì¡´ì„± ì¶”ê°€</b>

| ë¶„ë¥˜       | ì •ë³´                                                    |
| ---------- | ------------------------------------------------------- |
| ê¸°ë³¸       | - Spring Boot DevTools <br> - Lombok <br> - Spring Web  |
| ë§ˆì´ë°”í‹°ìŠ¤ | - MyBatis Framework <br> - JDBC API <br> - MySQL Driver |
| ì‹œíë¦¬í‹°   | - Spring Security <br> - OAuth2 Client                  |

<b>2. application.yml</b>

```yml
# DB ì—°ê²° ì •ë³´
spring:
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://localhost:3306/ncbt
    username: "" #ID
    password: "" #PW

# ë§ˆì´ë°”í‹°ìŠ¤ ì„¤ì •
mybatis:
  type-aliases-package: kr.bit.ncbt.domain
  mapper-locations: classpath:mapper/*.xml
  configuration:
    map-underscore-to-camel-case: true
```

<b>3. MyBatisConfig.class</b>

```java
@Configuration
public class MyBatisConfig {

// DataSource : ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²°ì„ ì œê³µí•˜ëŠ” ê°ì²´. yml ì—ì„œ ì„¤ì •í•œ DB ì—°ê²° ì •ë³´ê°€ ìë™ìœ¼ë¡œ ì£¼ì…ëœë‹¤.
    @Autowired
    private DataSource dataSource;

// MyBatisì—ì„œ SQL ì„¸ì…˜ì„ ê´€ë¦¬í•˜ëŠ” sessionFactory ë¥¼ ìƒì„±í•˜ëŠ” ê°ì²´. ë°ì´í„°ë² ì´ìŠ¤ì™€ì˜ ìƒí˜¸ì‘ìš©ì„ ì²˜ë¦¬í•œë‹¤.
    @Bean
    public SqlSessionFactory sqlSessionFactory() throws Exception {
        SqlSessionFactoryBean factoryBean = new SqlSessionFactoryBean();
        factoryBean.setDataSource(dataSource);
        return factoryBean.getObject();
    }
}
```

<b>4. Mapper Interface</b>

- Mapper ëŠ” ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ì‚¬ìš©í•´ë„ ë˜ê³  xml íŒŒì¼ì„ ë”°ë¡œ ë¹¼ì„œ ì‚¬ìš©í•´ë„ ëœë‹¤.
- ê°œì¸ì ìœ¼ë¡œ ìŠ¤í”„ë§ ë¹ˆ ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì§ê´€ì ì´ê³  ê°„í¸í•´ì„œ ë¹ˆìœ¼ë¡œ ì‚¬ìš©í–ˆë‹¤.

```java
@Mapper
public interface TestMapper {
    @Select("SELECT * FROM user")
    List<User> testSelect();

    @Insert("INSERT user(email,nickname,password,is_admin,platform) " +
            "values (#{email}, #{nickname}, #{password}, #{is_admin}, #{platform})")
    int testInsert(User user);

}
```

<b>5. JUnit Test</b>

- 1~4 ê¹Œì§€ ì„¤ì •í•œ í›„ ë‹¨ìœ„í…ŒìŠ¤íŠ¸ë¡œ ë§ˆì´ë°”í‹°ìŠ¤ ì—°ë™ ì—¬ë¶€ë¥¼ í™•ì¸í•´ì¤¬ë‹¤.

```java
@SpringBootTest
public class TestMapperTest {

    @Autowired
    private TestMapper testMapper;

    @Test
    public void insertTest() {
        // given
        User user = new User();
        user.setEmail("test@email");
        user.setPassword("123456");
        user.setNickname("tester3");
        user.set_admin(false);
        user.setPlatform("normal");

        // when
        testMapper.testInsert(user);

        // then
        List<User> users = testMapper.testSelect();
        User userTest = users.get(users.size() - 1);
        Assertions.assertThat(userTest).isEqualTo(user);
    }
}
```

&nbsp;

### 2ï¸âƒ£ ìš”êµ¬ì‚¬í•­ ë¶„ì„ ë° ERD ì„¤ê³„

<b>0. ìš”êµ¬ì‚¬í•­ ì •ë¦¬</b>

- ìš°ì„  ìš°ë¦¬ í”„ë¡œì íŠ¸ì˜ ê¸°ëŠ¥ ë° ìš”êµ¬ì‚¬í•­ì„ ì •ë¦¬í•´ë³´ì•˜ë‹¤.
- íšŒì›ì€ ê°€ì…, ë¡œê·¸ì¸, ë¡œê·¸ì•„ì›ƒì´ ê°€ëŠ¥í•˜ê³ , ì›í•˜ëŠ” ë¬¸ì œë¥¼ ë¶ë§ˆí¬í•˜ê±°ë‚˜ ë¬¸ì œ ì˜¤ë¥˜ë¥¼ ì‹ ê³ í•  ìˆ˜ ìˆë‹¤.
- ê´€ë¦¬ìëŠ” ê´€ë¦¬ì í˜ì´ì§€ì—ì„œ íšŒì› ì •ë³´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆê³  íšŒì› ì¦ê° ì¶”ì´ë¥¼ ì¼ë³„, ì›”ë³„ë¡œ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ë˜í•œ íšŒì›ì˜ ì‹ ê³ ë¥¼ ì ‘ìˆ˜í•˜ì—¬ ë¬¸ì œë¥¼ ìˆ˜ì •í•˜ê±°ë‚˜ ì‚­ì œí•  ìˆ˜ ìˆë‹¤.
- CBT ëŠ” ì—°ìŠµë¬¸ì œ, ì‹¤ì „ë¬¸ì œ í’€ê¸° ê¸°ëŠ¥ì´ ìˆë‹¤.
- ê²Œì„ì€ ì‹¤ì „ë¬¸ì œ í’€ì´ë¥¼ ìœ ì € ê°„ 1 vs 1 ë¡œ ëŒ€ê²°í•˜ì—¬ ì¦ê¸¸ ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì´ë‹¤.

| íšŒì›             | ê´€ë¦¬ì                 | CBT           | ê²Œì„        |
| ---------------- | ---------------------- | ------------- | ----------- |
| íšŒì› ê°€ì…        | íšŒì› ê´€ë¦¬              | ì—°ìŠµë¬¸ì œ í’€ê¸° | 1 vs 1 ëŒ€ê²° |
| ë¡œê·¸ì¸, ë¡œê·¸ì•„ì›ƒ | íšŒì› ìˆ˜ ì¦ê° ì¶”ì´ í™•ì¸ | ì‹¤ì „ë¬¸ì œ í’€ê¸° |             |
| ë¶ë§ˆí¬           | ë¬¸ì œ ìˆ˜ì •, ì‚­ì œ í™•ì¸   |               |             |
| ë¬¸ì œ ì˜¤ë¥˜ ì‹ ê³    |                        |               |             |

&nbsp;

<b>1. ì´ˆê¸° ì„¤ê³„ 240901</b>

- ìœ„ ìš”êµ¬ì‚¬í•­ì„ ë°”íƒ•ìœ¼ë¡œ ì‘ì„±í•œ ERD í…Œì´ë¸”ì´ë‹¤.
- íŠ¹ì´ì‚¬í•­ìœ¼ë¡œ, NCBT í”„ë¡œì íŠ¸ëŠ” ì‹œí—˜ë¬¸ì œ ë°ì´í„°ë¥¼ ë¦¬ì•¡íŠ¸ ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì—ì„œ ê´€ë¦¬í•˜ê¸°ë¡œ í–ˆë‹¤. ë¬¸í•­ ìˆ˜ê°€ ë§ì§€ ì•Šì•„ ê°€ëŠ¥í•œ ë°©ì‹ìœ¼ë¡œ, ì„±ëŠ¥ ìµœì í™”ë¥¼ ìœ„í•´ DB ì™€ì˜ í†µì‹ ì„ ìµœëŒ€í•œ ì¤„ì´ê³  ì‹¶ì–´ì„œ ì´ëŸ¬í•œ ë°©ì‹ì„ ì„ íƒí–ˆë‹¤.

<img width="516" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2024-11-27 á„‹á…©á„’á…® 4 13 51" src="https://github.com/user-attachments/assets/906d6b2d-bcd3-4838-a0f9-5ee06269118f">

- ìœ ì—°ì„±, í™•ì¥ì„±ì— ì´ˆì ì„ ë§ì¶° ì„¤ê³„í•˜ê³ ì í–ˆë‹¤.

  - í˜„ì¬ NCBT í”„ë¡œì íŠ¸ëŠ” NCA, NCP ë¬¸ì œë§Œ ì„œë¹„ìŠ¤í•  ê³„íšì´ì§€ë§Œ ì¶”í›„ NCE ë¬¸ì œê°€ ì¶”ê°€ë  ê²ƒì„ ê³ ë ¤í•˜ì—¬ ê³¼ëª© ë° ê³¼ëª©ë³„ ë¬¸ì œ í…Œì´ë¸”ì„ ë¶„ë¦¬í–ˆë‹¤.(ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ì—ëŠ” 'ìƒì†' ì´ë¼ëŠ” ê°œë…ì´ ì—†ì§€ë§Œ ê·¸ë˜ë„ Java ê°œë°œìì—ê²Œ ìµìˆ™í•œ ê°œë…ìœ¼ë¡œ ì„¤ëª…í•˜ìë©´ subject í…Œì´ë¸”ì´ ë¶€ëª¨ í…Œì´ë¸”, subject_question ì´ ìì‹ í…Œì´ë¸”ì´ ëœë‹¤.)

- ìœ ì§€ë³´ìˆ˜ì˜ ê´€ì ì—ì„œ ì¤‘ë³µ ì—†ì´ ê°„ê²°í•˜ê²Œ í…Œì´ë¸”ì„ êµ¬ì„±í•˜ê³ ì í–ˆë‹¤.
  - DBì— ë‚¨ê¸¸ ë°ì´í„°ëŠ” ìœ ì € ì •ë³´ì™€ ë¶ë§ˆí¬, ë¬¸ì œ ì˜¤ë¥˜ ì‹ ê³ , í‹€ë¦° ë¬¸ì œ ë°ì´í„°, ê²Œì„ ê´€ë ¨ ë°ì´í„°ì´ë‹¤. ì´ ì¤‘ì—ì„œ subject, subject_question í…Œì´ë¸”ì„ ê³µí†µìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ë°ì´í„°ë“¤ì´ ìˆì–´ì„œ (ì¤‘ë³µì„ ìµœì†Œí™”í•˜ê¸° ìœ„í•´) ìì‹ í…Œì´ë¸”ì¸ subject_question í…Œì´ë¸”ì— is_wrong, is_bookmark ì—´ì„ ì¶”ê°€í–ˆë‹¤.

### ì, ì´ì œ ê°œë°œì„ ì‹œì‘í•´ë³´ì !

ğŸ”– ì°¸ê³ ë¬¸ì„œ

[ìŠ¤í”„ë§ ë¶€íŠ¸ ê¸°ì´ˆ](https://gdngy.tistory.com/120)

[ìŠ¤í”„ë§ ë¶€íŠ¸ì™€ ë§ˆì´ë°”í‹°ìŠ¤ ì—°ë™-1](https://gdngy.tistory.com/163)

[ìŠ¤í”„ë§ ë¶€íŠ¸ì™€ ë§ˆì´ë°”í‹°ìŠ¤ ì—°ë™-2](https://velog.io/@dondonee/MyBatis-%EC%8A%A4%ED%94%84%EB%A7%81%EB%B6%80%ED%8A%B8-%EB%A7%88%EC%9D%B4%EB%B0%94%ED%8B%B0%EC%8A%A4-%EC%97%B0%EB%8F%99#%EB%A7%88%EC%9D%B4%EB%B0%94%ED%8B%B0%EC%8A%A4-%EC%97%B0%EB%8F%99-%ED%85%8C%EC%8A%A4%ED%8A%B8)

[DB ì„¤ê³„ëŠ” ì–´ë–»ê²Œ í•´ì•¼ í• ê¹Œ?](https://velog.io/@sontulip/how-to-db-design)
